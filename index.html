<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
<title>Ø³Ø§ÙØª Ø´ÛŒØ±Ø§Ø²</title>

<link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/dist/font-face.css?v=3" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css?v=3">

<style>
/* ================= ORIGINAL BASE ================= */
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{
font-family:"Vazirmatn",sans-serif;
background:#0e0e0f;
color:#fff;
overflow-x:hidden;
}

/* ================= CINEMATIC VARIABLES ================= */
:root{
--gold:#ffd700;
--glass:rgba(255,255,255,.08);
--blur:14px;
}
body.minimal{--gold:#ffffff;--glass:rgba(255,255,255,.04)}
body.vip{--gold:#ffcc00}
body.vhs{filter:contrast(1.15) saturate(1.35)}

/* ================= SCROLL PROGRESS ================= */
#scroll-progress{
position:fixed;
top:0;right:0;
width:4px;
height:0;
background:var(--gold);
z-index:9999;
}

/* ================= HEADER / CURTAIN ================= */
header{
background:rgba(0,0,0,.6);
backdrop-filter:blur(10px);
padding:15px 25px;
display:flex;
justify-content:space-between;
align-items:center;
position:sticky;
top:0;
z-index:50;
border-bottom:1px solid rgba(255,215,0,.2);
overflow:hidden;
}
header::before,header::after{
content:"";
position:absolute;
top:0;
width:50%;
height:100%;
background:#400;
z-index:60;
animation:curtain 2s ease forwards;
}
header::before{right:50%}
header::after{left:50%}
@keyframes curtain{to{width:0}}

.logo-fa{
font-size:26px;
font-weight:800;
background:linear-gradient(45deg,var(--gold),#ffb300);
-webkit-background-clip:text;
color:transparent;
animation:logoGlow 3s infinite alternate;
}
@keyframes logoGlow{
from{text-shadow:0 0 6px var(--gold)}
to{text-shadow:0 0 25px var(--gold)}
}

/* ================= PROJECTOR ================= */
.projector{
position:fixed;
top:-25%;
left:50%;
width:700px;
height:700px;
background:radial-gradient(circle,rgba(255,215,0,.22),transparent 60%);
transform:translateX(-50%);
pointer-events:none;
z-index:-1;
}

/* ================= GRAIN ================= */
body::after{
content:"";
position:fixed;
inset:0;
background:url("https://grainy-gradients.vercel.app/noise.svg");
opacity:.06;
pointer-events:none;
z-index:200;
}

/* ================= VHS LINES ================= */
body.vhs::before{
content:"";
position:fixed;
inset:0;
background:repeating-linear-gradient(
to bottom,
rgba(255,255,255,.03),
rgba(255,255,255,.03) 1px,
transparent 1px,
transparent 2px
);
pointer-events:none;
z-index:300;
}

/* ================= MOVIES GRID ================= */
.movies-grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
gap:20px;
max-width:1200px;
margin:0 auto 40px;
scroll-snap-type:y mandatory;
}
.movie-card{
scroll-snap-align:start;
animation:cardIn .9s ease both;
}
@keyframes cardIn{
from{opacity:0;transform:translateY(40px)}
to{opacity:1;transform:none}
}

/* ================= CARDS (ORIGINAL STRUCTURE) ================= */
.movie-card{perspective:1000px}
.card-inner{
width:280px;
height:420px;
position:relative;
transform-style:preserve-3d;
transition:.35s;
cursor:pointer;
}
.card-inner.flipped{transform:rotateY(180deg)}
.card-front,.card-back{
position:absolute;
inset:0;
border-radius:16px;
overflow:hidden;
backface-visibility:hidden;
border:2px solid rgba(255,215,0,.6);
background:rgba(19,19,20,.75);
backdrop-filter:blur(var(--blur));
box-shadow:0 0 10px rgba(255,215,0,.25);
}
.card-back{
transform:rotateY(180deg);
padding:15px;
font-size:14px;
}

/* ================= COMMENTS / RATING ================= */
.comments{
max-width:900px;
margin:80px auto;
padding:20px;
background:var(--glass);
border-radius:16px;
backdrop-filter:blur(var(--blur));
}
.comment{
padding:10px 0;
border-bottom:1px solid rgba(255,255,255,.1);
}
.stars{color:var(--gold)}
</style>
</head>

<body class="luxury">

<div id="scroll-progress"></div>
<div class="projector"></div>

<header>
<div class="logo-fa">Soft Shiraz</div>
<div>
<button id="themeBtn">ğŸ­</button>
<button id="vhsBtn">ğŸ“¼</button>
<button id="vipBtn">ğŸ‘‘</button>
</div>
</header>

<main>
<section style="margin:40px 0;text-align:center">
<h2 style="color:var(--gold)">Ø§Ú©Ø±Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡</h2>
</section>

<div class="movies-grid" id="cards-container"></div>

<section class="comments">
<h3>ğŸ¬ Ø¯ÛŒÙˆØ§Ø± Ù†Ø¸Ø±Ø§Øª</h3>
<div class="comment">â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸ ØªØ¬Ø±Ø¨Ù‡â€ŒØ§ÛŒ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø³ÛŒÙ†Ù…Ø§ÛŒÛŒ</div>
<div class="comment">â­ï¸â­ï¸â­ï¸â­ï¸ Ø·Ø±Ø§Ø­ÛŒ Ù„ÙˆÚ©Ø³ Ùˆ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</div>
<div class="stars">Ø§Ù…ØªÛŒØ§Ø²: â˜…â˜…â˜…â˜…â˜†</div>
</section>
</main>

<script>
/* ===== Welcome Smart ===== */
if(!localStorage.softWelcome){
  alert("ğŸ¬ Ø¨Ù‡ ØªØ¬Ø±Ø¨Ù‡ Ø³ÛŒÙ†Ù…Ø§ÛŒÛŒ Soft Shiraz Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯");
  localStorage.softWelcome = "1";
}

/* ===== Scroll Progress ===== */
window.addEventListener("scroll",()=>{
  const h = document.documentElement.scrollHeight - innerHeight;
  document.getElementById("scroll-progress").style.height =
    (scrollY / h) * 100 + "%";
});

/* ===== Theme / VHS / VIP ===== */
document.getElementById("themeBtn").onclick=()=>{
  document.body.classList.toggle("minimal");
};
document.getElementById("vhsBtn").onclick=()=>{
  document.body.classList.toggle("vhs");
};
document.getElementById("vipBtn").onclick=()=>{
  document.body.classList.toggle("vip");
};

/* ===== Loader (Original Logic) ===== */
const overlay=document.getElementById("loading-overlay");
if(overlay){
const minDuration=5000,startTime=Date.now();
window.addEventListener("load",()=>{
const elapsed=Date.now()-startTime;
setTimeout(()=>overlay.classList.add("hidden"),Math.max(0,minDuration-elapsed));
});
}

/* ===== Load Cards (ORIGINAL â€“ UNCHANGED LOGIC) ===== */
const container=document.getElementById("cards-container");
let openCard=null;
(async function loadCardsStrictly(){
for(let num=1;num<=150;num++){
try{
const r=await fetch(`cards/${num}.html?v=${Date.now()}`,{cache:"no-store"});
if(!r.ok)continue;
const html=await r.text();
const card=document.createElement("div");
card.className="movie-card";
card.innerHTML=html;
container.appendChild(card);
}catch(e){}
}
})();

/* ===== Reserve Logic (ORIGINAL) ===== */
document.addEventListener("click",function(e){
const btn=e.target.closest(".reserve-bar a");
if(!btn||btn.textContent.trim()!=="ØªÙ‡ÛŒÙ‡ Ø¨Ù„ÛŒØ·")return;
e.stopPropagation();
const front=btn.closest(".card-front");
const adminId=front?.dataset.adminId||"softshirazadmin";
const movie=front?.querySelector(".date-bar")?.textContent.trim()||"Ù†Ø§Ù…Ø´Ø®Øµ";
const time=front?.querySelector(".title-bar")?.textContent.trim()||"Ù†Ø§Ù…Ø´Ø®Øµ";
const msg=`ğŸ’– Ø³Ù„Ø§Ù… ÙˆÙ‚Øª Ø¨Ø®ÛŒØ± ğŸ’–\n\nğŸ¬ ÙÛŒÙ„Ù… : ${movie}\nğŸ•“ Ø²Ù…Ø§Ù† : ${time}\n\nÙ…Ù…Ù†ÙˆÙ† Ù…ÛŒØ´Ù… Ø´Ø±Ø§ÛŒØ· Ø±Ø²Ø±Ùˆ Ø±Ùˆ Ø¨ÙØ±Ù…Ø§ÛŒÛŒØ¯`;
window.open(`https://t.me/${adminId}?text=${encodeURIComponent(msg)}`,"_blank");
});

/* ===== Flip Card (ORIGINAL) ===== */
document.addEventListener("click",function(e){
if(e.target.closest(".reserve-bar"))return;
const inner=e.target.closest(".card-inner");
if(!inner)return;
if(openCard&&openCard!==inner)openCard.classList.remove("flipped");
inner.classList.toggle("flipped");
openCard=inner.classList.contains("flipped")?inner:null;
});

/* ===== PWA / Offline ===== */
if("serviceWorker"in navigator){
navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>

