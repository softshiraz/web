<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>اکران‌های بعدی - Soft Shiraz</title>

<link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/dist/font-face.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{
    font-family:"Vazirmatn",sans-serif;
    background:#0f0f11;
    color:#fff;
    min-height:100vh;
}
header{
    background:rgba(0,0,0,0.65);
    backdrop-filter:blur(12px);
    padding:15px 25px;
    border-bottom:1px solid #333;
    position:sticky;
    top:0;
    z-index:1000;
    display:flex;
    justify-content:flex-start; /* لوگو سمت چپ */
}
.logo-fa{
    font-size:28px;
    font-weight:900;
    color:#ffd700;
}

h2{
    text-align:center;
    font-size:30px;
    color:#ffd700;
    margin:40px auto 50px;
    padding-bottom:8px;
    border-bottom:3px solid #ffd700;
    width:fit-content;
}

/* گرید کاملاً وسط صفحه */
.movies-grid{
    display:grid;
    gap:30px;
    justify-content:center;
    max-width:1400px;
    margin:0 auto;
    padding:0 15px;
}
@media (min-width:1300px){ .movies-grid{grid-template-columns:repeat(4,1fr);} }
@media (max-width:1299px) and (min-width:900px){ .movies-grid{grid-template-columns:repeat(3,1fr);} }
@media (max-width:899px) and (min-width:550px){ .movies-grid{grid-template-columns:repeat(2,1fr);} }
@media (max-width:549px){ .movies-grid{grid-template-columns:1fr;} }

.movie-card{
    perspective:1200px;
    width:100%;
    max-width:290px;
    animation:fadeUp 0.9s ease backwards;
}
.card-inner{
    position:relative;
    width:100%;
    height:460px;
    transform-style:preserve-3d;
    transition:transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border-radius:18px;
    cursor:pointer;
    box-shadow:0 4px 20px rgba(0,0,0,0.5);
}
.card-inner.flipped{ transform:rotateY(180deg); }

.card-front,.card-back{
    position:absolute;
    inset:0;
    backface-visibility:hidden;
    border-radius:18px;
    overflow:hidden;
    background:#121214;
    border:1px solid #222;
}
.card-front:hover{ box-shadow:0 15px 40px rgba(0,0,0,0.7); }

.img-bar{
    height:320px;
    background:#000;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
}
.img-bar img{
    width:100%;
    height:100%;
    object-fit:cover;
    transition:transform 0.4s ease;
}
.card-front:hover .img-bar img{ transform:scale(1.1); }

.date-bar,.title-bar{
    height:42px;
    line-height:42px;
    padding:0 14px;
    text-align:center;
    backdrop-filter:blur(8px);
    font-size:15px;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
}
.date-bar{background:rgba(0,0,0,0.65);color:#ffd700;font-weight:bold;}
.title-bar{background:rgba(0,0,0,0.55);color:#fff;}

.reserve-bar{
    height:56px;
    background:#ffd700;
    color:#000;
    font-weight:bold;
    font-size:17px;
    display:flex;
    align-items:center;
    justify-content:center;
}
.reserve-bar a{
    color:#000;
    text-decoration:none;
    width:100%;
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
}

.card-back{
    transform:rotateY(180deg);
    padding:24px;
    background:#111;
    display:flex;
    flex-direction:column;
    gap:14px;
    font-size:14.5px;
    line-height:23px;
}
.card-back h3{color:#ffd700;font-size:19px;margin-bottom:5px;}
.card-back strong{color:#ffd700;}

footer{
    margin-top:90px;
    padding:40px 25px;
    background:#000;
    border-top:1px solid #333;
    text-align:right;
}
.footer-title{font-size:20px;color:#ffd700;margin-bottom:15px;}
.social-row{display:flex;gap:15px;justify-content:flex-end;}
.social-icon{
    width:50px;height:50px;border-radius:50%;
    background:#1c1c1c;color:#ffd700;font-size:22px;
    display:flex;align-items:center;justify-content:center;text-decoration:none;
}
.social-icon:hover{background:#ffd700;color:#000;transition:0.3s;}

@keyframes fadeUp{
    from{opacity:0;transform:translateY(30px);}
    to{opacity:1;transform:translateY(0);}
}
</style>
</head>
<body>

<header>
    <div class="logo-fa">Soft Shiraz</div>
</header>

<h2>اکران‌های بعدی</h2>

<div class="movies-grid" id="movies-container"></div>

<footer>
    <div class="footer-title">شبکه‌های اجتماعی سافت شیراز</div>
    <div class="social-row">
        <a class="social-icon" href="https://t.me/softshiraz" target="_blank"><i class="fab fa-telegram"></i></a>
        <a class="social-icon" href="https://instagram.com/softshiraz" target="_blank"><i class="fab fa-instagram"></i></a>
    </div>
</footer>

<script>
const container = document.getElementById("movies-container");
let currentFlipped = null;

// لود ترتیب از order.txt
fetch("order.txt?t=" + Date.now())
    .then(r => r.ok ? r.text() : Promise.reject())
    .then(text => text.split(",").map(n => n.trim()).filter(Boolean))
    .then(order => {
        if (order.length === 0) return;

        order.forEach((num, index) => {
            const id = num.trim();
            if (!id) return;

            fetch(`cards/${id}.json?t=${Date.now()}`)
                .then(r => r.ok ? r.json() : Promise.reject())
                .then(data => {
                    const card = document.createElement("div");
                    card.className = "movie-card";
                    card.style.animationDelay = `${index * 0.1}s`;

                    // اگر تصویر نبود → جای خالی (هیچ چیز اضافه نمیشه)
                    const imgHtml = data.image 
                        ? `<img src="${data.image}" alt="${data.title || ''}" onerror="this.style.display='none'">`
                        : '';

                    card.innerHTML = `
                        <div class="card-inner">
                            <div class="card-front">
                                <div class="date-bar">${data.date || 'به زودی'}</div>
                                <div class="img-bar">${imgHtml}</div>
                                <div class="title-bar">${data.title || 'فیلم ' + id}</div>
                                <div class="reserve-bar">
                                    <a href="${data.reserve_link || 'https://t.me/softshiraz'}" target="_blank">رزرو بلیط</a>
                                </div>
                            </div>

                            <div class="card-back">
                                <h3>${data.back?.movie_title || data.title || 'فیلم ' + id}</h3>
                                <p><strong>ژانر:</strong> ${data.back?.genre || 'نامشخص'}</p>
                                <p><strong>خلاصه:</strong> ${data.back?.summary || 'در حال بروزرسانی...'}</p>
                                <p><strong>سال انتشار:</strong> ${data.back?.year || 'نامشخص'}</p>
                                <p><strong>امتیاز IMDb:</strong> ${data.back?.imdb || 'نامشخص'}</p>
                                <p><strong>مدت زمان:</strong> ${data.back?.duration || 'نامشخص'}</p>
                                <p><strong>رده سنی:</strong> ${data.back?.age || 'نامشخص'}</p>
                            </div>
                        </div>
                    `;
                    container.appendChild(card);
                })
                .catch(() => {
                    // اگر JSON نبود → هیچی نمایش داده نمیشه (کاملاً مخفی)
                    console.log(`کارت ${id} وجود ندارد یا خطا دارد`);
                });
        });
    });

// فلیپ کارت با کلیک
document.addEventListener("click", e => {
    const inner = e.target.closest(".card-inner");
    if (!inner) {
        if (currentFlipped) currentFlipped.classList.remove("flipped");
        currentFlipped = null;
        return;
    }
    if (currentFlipped && currentFlipped !== inner) {
        currentFlipped.classList.remove("flipped");
    }
    inner.classList.toggle("flipped");
    currentFlipped = inner.classList.contains("flipped") ? inner : null;
});
</script>

</body>
</html>