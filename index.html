<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<title>سافت شیراز</title>

<link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/dist/font-face.css?v=3" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css?v=3">

<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
body{font-family:"Vazirmatn",sans-serif;background:#0e0e0f;color:#fff;overflow-x:hidden;}
#gold-particles{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0;overflow:hidden;}
.particle{position:absolute;background:rgba(255,215,0,0.8);border-radius:50%;box-shadow:0 0 6px rgba(255,215,0,0.9);animation:floatDown linear infinite;}
@keyframes floatDown{from{transform:translateY(-120vh);opacity:1;}to{transform:translateY(120vh);opacity:0;}}

header{background:rgba(0,0,0,0.5);backdrop-filter:blur(10px);padding:15px 25px;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:20;border-bottom:1px solid rgba(48,48,48,0.5);}
.logo-fa{font-weight:700;font-size:26px;background:linear-gradient(45deg,#ffd700,#ffb300);-webkit-background-clip:text;color:transparent;}

.hamburger-btn{width:48px;height:42px;background:rgba(26,26,26,0.6);border-radius:10px;border:2px solid rgba(255,215,0,0.25);color:#ffd700;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:.2s;}
.hamburger-inner{position:relative;width:22px;height:16px;}
.hamburger-inner span{position:absolute;left:0;right:0;height:2px;background:#ffd700;border-radius:2px;}
.hamburger-inner span:nth-child(1){top:0;}
.hamburger-inner span:nth-child(2){top:7px;}
.hamburger-inner span:nth-child(3){top:14px;}

#side-menu{position:fixed;top:0;right:0;height:100vh;width:320px;max-width:85%;background:linear-gradient(180deg,rgba(12,12,12,0.98),rgba(20,20,20,0.98));transform:translateX(100%);transition:transform .32s cubic-bezier(.2,.9,.2,1);z-index:30;padding:28px;display:flex;flex-direction:column;gap:18px;border-left:2px solid rgba(255,215,0,0.12);}
#side-menu.open{transform:translateX(0);}
#menu-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);opacity:0;pointer-events:none;transition:opacity .3s;z-index:25;}
#menu-backdrop.visible{opacity:1;pointer-events:auto;}
#menu-close{background:none;border:none;color:#ffd700;font-size:22px;cursor:pointer;align-self:flex-start;}

.side-brand{font-weight:800;color:#ffd700;font-size:20px;text-align:right;}
.side-desc{font-size:13px;color:rgba(255,255,255,0.8);text-align:right;margin-bottom:10px;}
.side-links a{display:block;padding:12px 16px;border-radius:10px;background:rgba(255,255,255,0.03);color:#fff;text-decoration:none;font-weight:600;margin-bottom:6px;transition:.2s;}
.side-links a:hover{background:rgba(255,215,0,0.1);color:#ffd700;}

main{padding:35px 15px 80px;}
h2{color:#ffd700;font-size:28px;text-align:center;margin-bottom:35px;border-bottom:3px solid #ffd700;display:inline-block;padding-bottom:8px;}

.movies-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;justify-items:center;max-width:1200px;margin:0 auto;}
.movie-card{perspective:1000px;}
.card-inner{position:relative;width:280px;height:420px;transform-style:preserve-3d;transition:transform .4s;cursor:pointer;}
.card-inner.flipped{transform:rotateY(180deg);}
.card-front,.card-back{position:absolute;inset:0;border-radius:16px;overflow:hidden;backface-visibility:hidden;border:2px solid rgba(255,215,0,0.65);box-shadow:0 0 12px rgba(255,215,0,0.3);background:rgba(19,19,20,0.9);backdrop-filter:blur(10px);}
.card-back{transform:rotateY(180deg);padding:20px;text-align:right;font-size:14px;display:flex;flex-direction:column;gap:10px;}
.img-bar{flex:1;overflow:hidden;}
.img-bar img{width:100%;height:100%;object-fit:cover;transition:transform .4s;}
.movie-card:hover .img-bar img{transform:scale(1.08);}
.date-bar{height:52px;line-height:52px;background:rgba(0,0,0,0.5);color:#ffd700;text-align:center;font-size:19px;font-weight:900;text-shadow:0 0 12px gold;}
.title-bar{height:36px;line-height:36px;background:rgba(0,0,0,0.4);color:#fff;text-align:center;font-size:15px;}
.reserve-bar{height:36px;line-height:36px;background:#ffd700;color:#000;font-weight:bold;text-align:center;cursor:pointer;}
.reserve-bar:hover{background:#ffea00;}

footer{background:rgba(0,0,0,0.5);backdrop-filter:blur(10px);padding:20px;text-align:center;border-top:1px solid rgba(48,48,48,0.5);}
.footer-title{color:#ffd700;margin-bottom:15px;}
.social-row{display:flex;justify-content:center;gap:20px;}
.social-icon{width:48px;height:48px;background:rgba(26,26,26,0.7);backdrop-filter:blur(5px);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#ffd700;font-size:22px;transition:.3s;}
.social-icon:hover{background:#ffd700;color:#000;}

#loading-overlay{position:fixed;inset:0;background:#0e0e0f;display:flex;justify-content:center;align-items:center;z-index:9999;transition:opacity .8s;}
#loading-overlay.hidden{opacity:0;pointer-events:none;}
.loader{width:60px;height:60px;position:relative;}
.loader .circle{position:absolute;width:100%;height:100%;opacity:0;transform:rotate(225deg);animation:orbit 5.5s infinite;}
.loader .circle:after{content:'';position:absolute;width:8px;height:8px;border-radius:50%;background:gold;left:50%;top:0;transform:translateX(-50%);}
.loader .circle:nth-child(2){animation-delay:240ms;}
.loader .circle:nth-child(3){animation-delay:480ms;}
.loader .circle:nth-child(4){animation-delay:720ms;}
.loader .circle:nth-child(5){animation-delay:960ms;}
@keyframes orbit{
  0%{transform:rotate(225deg);opacity:1;
  70%{transform:rotate(815deg);opacity:1;}
  75%{transform:rotate(945deg);}
  76%,100%{opacity:0;}
}

@media(max-width:1200px){.movies-grid{grid-template-columns:repeat(3,1fr);}}
@media(max-width:768px){.movies-grid{grid-template-columns:repeat(2,1fr);}}
@media(max-width:480px){.movies-grid{grid-template-columns:1fr;}}
</style>
</head>
<body>

<div id="gold-particles"></div>

<div id="loading-overlay">
  <div class="loader">
    <div class="circle"></div>
    <div class="circle"></div>
    <div class="circle"></div>
    <div class="circle"></div>
    <div class="circle"></div>
  </div>
</div>

<header>
  <button class="hamburger-btn" id="hamburger" aria-label="منو">
    <span class="hamburger-inner"><span></span><span></span><span></span></span>
  </button>
  <div class="logo-fa">Soft Shiraz</div>
</header>

<div id="menu-backdrop"></div>
<nav id="side-menu">
  <button id="menu-close">×</button>
  <div class="side-brand">Soft Shiraz</div>
  <div class="side-desc">معرفی اکران‌های آینده، رزرو بلیط و اخبار سینما</div>
  <div class="side-links">
    <a href="pages/past-releases.html">اکران‌های شده‌ها</a>
    <a href="events/events.html">ایونت‌ها</a>
    <a href="https://instagram.com/soft_shiraz" target="_blank">اینستاگرام</a>
    <a href="https://t.me/softshiraz" target="_blank">تلگرام</a>
    <a href="pages/about.html">درباره ما</a>
    <a href="https://t.me/FLOKI000">پشتیبانی</a>
  </div>
</nav>

<main>
  <h2>اکران‌های آینده</h2>
  <div class="movies-grid" id="cards-container"></div>
</main>

<footer>
  <div class="footer-title">سافت شیراز</div>
  <div class="social-row">
    <a class="social-icon" href="https://t.me/softshiraz" target="_blank"><i class="fab fa-telegram"></i></a>
    <a class="social-icon" href="https://instagram.com/soft_shiraz" target="_blank"><i class="fab fa-instagram"></i></a>
  </div>
</footer>

<script>
// ذرات طلایی
for(let i=0;i<90;i++){
  let p=document.createElement("div");p.className="particle";
  let s=Math.random()*3+2;
  p.style.width=p.style.height=s+"px";
  p.style.left=Math.random()*100+"%";
  p.style.animationDuration=(Math.random()*8+8)+"s";
  p.style.animationDelay=Math.random()*5+"s";
  document.getElementById("gold-particles").appendChild(p);
}

// بارگذاری کارت‌ها با ترتیب از order.json
const container = document.getElementById("cards-container");
const loading = document.getElementById("loading-overlay");
let loaded = 0;

async function startLoading(){
  let order = [1,2,3,4,5,6]; // پیش‌فرض

  try{
    const res = await fetch("cards/order.json?t="+Date.now(), {cache:"no-store"});
    if(res.ok){
      order = await res.json();
    }
  }catch(e){
    console.log("order.json پیدا نشد — از ترتیب پیش‌فرض استفاده می‌شود");
  }

  for(const num of order){
    try{
      const r = await fetch(`cards/${num}.html?t=${Date.now()}`, {cache:"no-store"});
      if(!r.ok) continue;
      const html = await r.text();
      const card = document.createElement("div");
      card.className="movie-card";
      card.innerHTML = html;
      container.appendChild(card);
      loaded++;
      if(loaded >= 6){ // حداقل ۶ تا کارت که اومد، لودینگ رو بردار
        loading.classList.add("hidden");
      }
    }catch(e){}

  // حداکثر ۸ ثانیه صبر کن بعد لودینگ رو کامل ببند
  setTimeout(()=>loading.classList.add("hidden"), 8000);
}

startLoading();

// رزرو بلیط
document.addEventListener("click", e=>{
  const a = e.target.closest(".reserve-bar a");
  if(!a || a.textContent.trim() !== "تهیه بلیط") return;
  e.preventDefault(); e.stopPropagation();
  const card = a.closest(".card-front");
  const name = card.querySelector(".date-bar")?.textContent.trim() || "نامشخص";
  const time = card.querySelector(".title-bar")?.textContent.trim() || "نامشخص";
  const msg = `سلام وقت بخیر

فیلم: ${name}
سانس: ${time}

موجودی و شرایط رزرو رو لطفاً بفرمایید
ممنونم`;
  window.open("https://t.me/softshirazadmin?text="+encodeURIComponent(msg), "_blank");
});

// فلیپ کارت
let openCard = null;
document.addEventListener("click", e=>{
  if(e.target.closest(".reserve-bar")) return;
  const inner = e.target.closest(".card-inner");
  if(!inner) return;
  if(openCard && openCard!==inner) openCard.classList.remove("flipped");
  inner.classList.toggle("flipped");
  openCard = inner.classList.contains("flipped") ? inner : null;
});

// منو
const menu = document.getElementById("side-menu");
const back = document.getElementById("menu-backdrop");
document.getElementById("hamburger").onclick = ()=> { menu.classList.add("open"); back.classList.add("visible"); }
document.getElementById("menu-close").onclick = back.onclick = ()=> { menu.classList.remove("open"); back.classList.remove("visible"); }
document.addEventListener("keydown", e=>{if(e.key==="Escape") {menu.classList.remove("open"); back.classList.remove("visible");}});
</script>
</body>
</html>
